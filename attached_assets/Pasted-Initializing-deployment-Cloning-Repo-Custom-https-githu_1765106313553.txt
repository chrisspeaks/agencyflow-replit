Initializing deployment
Cloning Repo Custom https://github.com/chrisspeaks/agencyflow-replit.git to /etc/dokploy/applications/agencyflow-dasds-mqfqnp/code: ✅
Cloning into '/etc/dokploy/applications/agencyflow-dasds-mqfqnp/code'...
remote: Enumerating objects: 170, done.
Building agencyflow-dasds-mqfqnp
#0 building with "default" instance using docker driver
#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 853B done
#1 DONE 0.1s
#2 [internal] load metadata for docker.io/library/node:20-alpine
#2 DONE 2.0s
#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.1s
#4 [builder 1/6] FROM docker.io/library/node:20-alpine@sha256:643e7036aa985317ebfee460005e322aa550c6b6883000d01daefb58689a58e2
#4 resolve docker.io/library/node:20-alpine@sha256:643e7036aa985317ebfee460005e322aa550c6b6883000d01daefb58689a58e2 0.0s done
#4 ...
#5 [internal] load build context
#5 transferring context: 2.32MB 0.1s done
#5 DONE 0.1s
#4 [builder 1/6] FROM docker.io/library/node:20-alpine@sha256:643e7036aa985317ebfee460005e322aa550c6b6883000d01daefb58689a58e2
#4 sha256:014e56e613968f73cce0858124ca5fbc601d7888099969a4eea69f31dcd71a53 0B / 3.86MB 0.2s
#4 sha256:d28ab52fe4290429b930e8fa368da4da8a7e63cf143c38f9b869950a67c32645 0B / 42.78MB 0.2s
#4 sha256:34226f5414967f183a8ba2d2a0bf2809b3864182e8f68c07c066fa83f025024a 0B / 1.26MB 0.2s
#4 sha256:643e7036aa985317ebfee460005e322aa550c6b6883000d01daefb58689a58e2 7.67kB / 7.67kB done
#4 sha256:fb140f51db2dfb99a12ea29ddc933a8719e46501de0295bed8c4c2824d1332cf 1.72kB / 1.72kB done
#4 sha256:9992b59c17bf27bd13e187f54112049f23f7da7b89343bee73963ae3d6a65fb9 6.52kB / 6.52kB done
#4 sha256:014e56e613968f73cce0858124ca5fbc601d7888099969a4eea69f31dcd71a53 1.05MB / 3.86MB 0.3s
#4 sha256:014e56e613968f73cce0858124ca5fbc601d7888099969a4eea69f31dcd71a53 3.86MB / 3.86MB 0.4s done
#4 extracting sha256:014e56e613968f73cce0858124ca5fbc601d7888099969a4eea69f31dcd71a53
#4 sha256:6ac8cc1f0b52065d2132d052abc59bf19e19ac0c65729d4300ab41db30fed855 0B / 446B 0.5s
#4 sha256:d28ab52fe4290429b930e8fa368da4da8a7e63cf143c38f9b869950a67c32645 6.29MB / 42.78MB 0.7s
#4 extracting sha256:014e56e613968f73cce0858124ca5fbc601d7888099969a4eea69f31dcd71a53 0.2s done
#4 sha256:d28ab52fe4290429b930e8fa368da4da8a7e63cf143c38f9b869950a67c32645 11.53MB / 42.78MB 0.9s
#4 sha256:34226f5414967f183a8ba2d2a0bf2809b3864182e8f68c07c066fa83f025024a 1.26MB / 1.26MB 0.8s done
#4 sha256:6ac8cc1f0b52065d2132d052abc59bf19e19ac0c65729d4300ab41db30fed855 446B / 446B 0.8s done
#4 sha256:d28ab52fe4290429b930e8fa368da4da8a7e63cf143c38f9b869950a67c32645 16.78MB / 42.78MB 1.1s
#4 sha256:d28ab52fe4290429b930e8fa368da4da8a7e63cf143c38f9b869950a67c32645 20.97MB / 42.78MB 1.2s
#4 sha256:d28ab52fe4290429b930e8fa368da4da8a7e63cf143c38f9b869950a67c32645 27.26MB / 42.78MB 1.4s
#4 sha256:d28ab52fe4290429b930e8fa368da4da8a7e63cf143c38f9b869950a67c32645 32.51MB / 42.78MB 1.6s
#4 sha256:d28ab52fe4290429b930e8fa368da4da8a7e63cf143c38f9b869950a67c32645 36.70MB / 42.78MB 1.7s
#4 sha256:d28ab52fe4290429b930e8fa368da4da8a7e63cf143c38f9b869950a67c32645 42.78MB / 42.78MB 1.9s done
#4 extracting sha256:d28ab52fe4290429b930e8fa368da4da8a7e63cf143c38f9b869950a67c32645 0.1s
#4 extracting sha256:d28ab52fe4290429b930e8fa368da4da8a7e63cf143c38f9b869950a67c32645 2.7s done
#4 extracting sha256:34226f5414967f183a8ba2d2a0bf2809b3864182e8f68c07c066fa83f025024a
#4 extracting sha256:34226f5414967f183a8ba2d2a0bf2809b3864182e8f68c07c066fa83f025024a 0.1s done
#4 extracting sha256:6ac8cc1f0b52065d2132d052abc59bf19e19ac0c65729d4300ab41db30fed855
#4 extracting sha256:6ac8cc1f0b52065d2132d052abc59bf19e19ac0c65729d4300ab41db30fed855 done
#4 DONE 5.3s
#6 [builder 2/6] WORKDIR /app
#6 DONE 0.2s
#7 [builder 3/6] COPY package*.json ./
#7 DONE 0.1s
#8 [builder 4/6] RUN npm ci
#8 ...
#9 [production  4/12] RUN apk add --no-cache python3 make g++ && npm ci --omit=dev && npm install tsx drizzle-kit bcrypt && apk del python3 make g++
#9 0.978 ( 1/29) Installing libstdc++-dev (15.2.0-r2)
#9 1.186 ( 2/29) Installing jansson (2.14.1-r0)
#9 1.193 ( 3/29) Installing zstd-libs (1.5.7-r2)
#9 1.208 ( 4/29) Installing binutils (2.45.1-r0)
#9 1.321 ( 5/29) Installing libgomp (15.2.0-r2)
#9 1.335 ( 6/29) Installing libatomic (15.2.0-r2)
#9 1.341 ( 7/29) Installing gmp (6.3.0-r4)
#9 1.352 ( 8/29) Installing isl26 (0.26-r1)
#9 1.389 ( 9/29) Installing mpfr4 (4.2.2-r0)
#9 1.404 (10/29) Installing mpc1 (1.3.1-r1)
#9 1.411 (11/29) Installing gcc (15.2.0-r2)
#9 3.303 (12/29) Installing musl-dev (1.2.5-r21)
#9 3.444 (13/29) Installing g++ (15.2.0-r2)
#9 4.183 (14/29) Installing make (4.4.1-r3)
#9 4.202 (15/29) Installing libbz2 (1.0.8-r6)
#9 4.210 (16/29) Installing libexpat (2.7.3-r0)
#9 4.221 (17/29) Installing libffi (3.5.2-r0)
#9 4.226 (18/29) Installing gdbm (1.26-r0)
#9 4.232 (19/29) Installing xz-libs (5.8.1-r0)
#9 4.248 (20/29) Installing mpdecimal (4.0.1-r0)
#9 4.260 (21/29) Installing ncurses-terminfo-base (6.5_p20251123-r0)
#9 4.283 (22/29) Installing libncursesw (6.5_p20251123-r0)
#9 4.319 (23/29) Installing libpanelw (6.5_p20251123-r0)
#9 4.320 (24/29) Installing readline (8.3.1-r0)
#9 4.341 (25/29) Installing sqlite-libs (3.51.1-r0)
#9 4.416 (26/29) Installing python3 (3.12.12-r0)
#9 4.803 (27/29) Installing python3-pycache-pyc0 (3.12.12-r0)
#9 5.109 (28/29) Installing pyc (3.12.12-r0)
#9 5.109 (29/29) Installing python3-pyc (3.12.12-r0)
#9 5.109 Executing busybox-1.37.0-r29.trigger
#9 5.147 OK: 301 MiB in 47 packages
#9 ...
#8 [builder 4/6] RUN npm ci
#8 9.178 npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is
#8 9.206 npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is
#8 ...
#9 [production  4/12] RUN apk add --no-cache python3 make g++ && npm ci --omit=dev && npm install tsx drizzle-kit bcrypt && apk del python3 make g++
#9 13.42 npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is
#9 13.47 npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is
#9 ...
#8 [builder 4/6] RUN npm ci
#8 18.54
#8 18.54 added 597 packages, and audited 598 packages in 18s
#8 18.54
#8 18.54 103 packages are looking for funding
#8 18.54   run `npm fund` for details
#8 18.58
#8 18.58 7 vulnerabilities (6 moderate, 1 high)
#8 18.58
#8 18.58 To address issues that do not require attention, run:
#8 18.58   npm audit fix
#8 18.58
#8 18.58 To address all issues (including breaking changes), run:
#8 18.58   npm audit fix --force
#8 18.58
#8 18.58 Run `npm audit` for details.
#8 18.58 npm notice
#8 18.58 npm notice New major version of npm available! 10.8.2 -> 11.6.4
#8 18.58 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.4
#8 18.58 npm notice To update run: npm install -g npm@11.6.4
#8 18.58 npm notice
#8 DONE 20.0s
#9 [production  4/12] RUN apk add --no-cache python3 make g++ && npm ci --omit=dev && npm install tsx drizzle-kit bcrypt && apk del python3 make g++
#9 ...
#10 [builder 5/6] COPY . .
#10 DONE 0.1s
#11 [builder 6/6] RUN npm run build
#11 0.612
#11 0.612 > vite_react_shadcn_ts@0.0.0 build
#11 0.612 > tsc && vite build
#11 0.612
#11 1.222 NODE_ENV=production is not supported in the .env file. Only NODE_ENV=development is supported to create a development build of your project. If you need to set process.env.NODE_ENV, you can set it in the Vite config instead.
#11 1.254 vite v5.4.19 building for production...
#11 1.334 transforming...
#11 1.857 Browserslist: browsers data (caniuse-lite) is 6 months old. Please run:
#11 1.857   npx update-browserslist-db@latest
#11 1.857   Why you should do it regularly: https://github.com/browserslist/update-db#readme
#11 ...
#9 [production  4/12] RUN apk add --no-cache python3 make g++ && npm ci --omit=dev && npm install tsx drizzle-kit bcrypt && apk del python3 make g++
#9 20.60
#9 20.60 added 483 packages, and audited 484 packages in 15s
#9 20.60
#9 20.60 62 packages are looking for funding
#9 20.60   run `npm fund` for details
#9 20.64
#9 20.64 5 vulnerabilities (4 moderate, 1 high)
#9 20.64
#9 20.64 To address issues that do not require attention, run:
#9 20.64   npm audit fix
#9 20.64
#9 20.64 To address all issues (including breaking changes), run:
#9 20.64   npm audit fix --force
#9 20.64
#9 20.64 Run `npm audit` for details.
#9 20.64 npm notice
#9 20.64 npm notice New major version of npm available! 10.8.2 -> 11.6.4
#9 20.64 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.4
#9 20.64 npm notice To update run: npm install -g npm@11.6.4
#9 20.64 npm notice
#9 27.40
#9 27.40 added 114 packages, and audited 598 packages in 7s
#9 27.40
#9 27.40 103 packages are looking for funding
#9 27.40   run `npm fund` for details
#9 27.44
#9 27.44 7 vulnerabilities (6 moderate, 1 high)
#9 27.44
#9 27.44 To address issues that do not require attention, run:
#9 27.44   npm audit fix
#9 27.44
#9 27.44 To address all issues (including breaking changes), run:
#9 27.44   npm audit fix --force
#9 27.44
#9 27.44 Run `npm audit` for details.
#9 27.48 ( 1/29) Purging g++ (15.2.0-r2)
#9 27.48 WARNING: opening from cache https://dl-cdn.alpinelinux.org/alpine/v3.23/main/x86_64/APKINDEX.tar.gz: No such file or directory
#9 27.48 WARNING: opening from cache https://dl-cdn.alpinelinux.org/alpine/v3.23/community/x86_64/APKINDEX.tar.gz: No such file or directory
#9 27.49 ( 2/29) Purging libstdc++-dev (15.2.0-r2)
#9 27.52 ( 3/29) Purging gcc (15.2.0-r2)
#9 27.60 ( 4/29) Purging binutils (2.45.1-r0)
#9 27.61 ( 5/29) Purging libatomic (15.2.0-r2)
#9 27.61 ( 6/29) Purging libgomp (15.2.0-r2)
#9 27.61 ( 7/29) Purging musl-dev (1.2.5-r21)
#9 27.62 ( 8/29) Purging isl26 (0.26-r1)
#9 27.62 ( 9/29) Purging jansson (2.14.1-r0)
#9 27.62 (10/29) Purging make (4.4.1-r3)
#9 27.62 (11/29) Purging mpc1 (1.3.1-r1)
#9 27.62 (12/29) Purging mpfr4 (4.2.2-r0)
#9 27.62 (13/29) Purging python3-pyc (3.12.12-r0)
#9 27.62 (14/29) Purging python3-pycache-pyc0 (3.12.12-r0)
#9 27.65 (15/29) Purging pyc (3.12.12-r0)
#9 27.65 (16/29) Purging python3 (3.12.12-r0)
#9 27.69 (17/29) Purging readline (8.3.1-r0)
#9 27.69 (18/29) Purging sqlite-libs (3.51.1-r0)
#9 27.69 (19/29) Purging xz-libs (5.8.1-r0)
#9 27.69 (20/29) Purging zstd-libs (1.5.7-r2)
#9 27.69 (21/29) Purging gdbm (1.26-r0)
#9 27.69 (22/29) Purging gmp (6.3.0-r4)
#9 27.69 (23/29) Purging libbz2 (1.0.8-r6)
#9 27.69 (24/29) Purging libexpat (2.7.3-r0)
#9 27.69 (25/29) Purging libffi (3.5.2-r0)
#9 27.69 (26/29) Purging libpanelw (6.5_p20251123-r0)
#9 27.69 (27/29) Purging libncursesw (6.5_p20251123-r0)
#9 27.69 (28/29) Purging ncurses-terminfo-base (6.5_p20251123-r0)
#9 27.70 (29/29) Purging mpdecimal (4.0.1-r0)
#9 27.70 Executing busybox-1.37.0-r29.trigger
#9 27.70 OK: 10 MiB in 18 packages
#9 DONE 28.1s
#11 [builder 6/6] RUN npm run build
#11 10.84 ✓ 2598 modules transformed.
#11 11.39 rendering chunks...
#11 11.41 computing gzip size...
#11 11.44 dist/index.html                   1.60 kB │ gzip:   0.62 kB
#11 11.44 dist/assets/index-B_M-bAYS.css   72.78 kB │ gzip:  12.53 kB
#11 11.44 dist/assets/index-BqY4jrs-.js   626.98 kB │ gzip: 188.31 kB
#11 11.44
#11 11.44 (!) Some chunks are larger than 500 kB after minification. Consider:
#11 11.44 - Using dynamic import() to code-split the application
#11 11.44 - Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
#11 11.44 - Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
#11 11.44 ✓ built in 10.15s
#11 DONE 11.6s
#12 [production  5/12] COPY --from=builder /app/dist ./dist
#12 DONE 0.0s
#13 [production  6/12] COPY --from=builder /app/server ./server
#13 CACHED
#14 [production  7/12] COPY --from=builder /app/shared ./shared
#14 CACHED
#15 [production  8/12] COPY --from=builder /app/drizzle ./drizzle
#15 ERROR: failed to calculate checksum of ref 93b012b9-b388-4835-a850-30e601154211::otjub04cbzunxbi4wzjs9sspg: "/app/drizzle": not found
------
> [production  8/12] COPY --from=builder /app/drizzle ./drizzle:
------
Dockerfile:23
--------------------
|     COPY --from=builder /app/server ./server
|     COPY --from=builder /app/shared ./shared
| >>> COPY --from=builder /app/drizzle ./drizzle
|     COPY --from=builder /app/scripts ./scripts
|     COPY --from=builder /app/tsconfig.json ./
--------------------
ERROR: failed to build: failed to solve: failed to compute cache key: failed to calculate checksum of ref 93b012b9-b388-4835-a850-30e601154211::otjub04cbzunxbi4wzjs9sspg: "/app/drizzle": not found
❌ Docker build failed
Error occurred ❌, check the logs for details.